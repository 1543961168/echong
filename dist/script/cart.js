"use strict";var uid=localStorage.getItem("id"),username=localStorage.getItem("username"),token=localStorage.getItem("token");$.get("http://jx.xuzhixiang.top/ap/api/cart-list.php",{id:uid},function(t){console.log(t),t=t.data;var n="";t.forEach(function(t){n+='\n            <tr>\n                <td class="commodity">\n                    <div>\n                        <img src="'.concat(t.pimg,'" alt="">\n                    </div>\n                    <h3>').concat(t.pdesc,'</h3>\n                                                  </td>\n                <td class="spice ">\n                    <h3>').concat(t.pprice,'</h3>\n                                 </td>\n                <td>\n                    <div class="num"  pid=').concat(t.pid,'>\n                        <a href="javaScript:;" class="reduce"> - </a><span class="num2">').concat(t.pnum,'</span><a href="javaScript:;" class="add">+</a>\n                    </div>\n                </td>\n                <td class="sumsp ">\n                    <h3>').concat(t.pprice*t.pnum,'</h3>\n                </td>\n                <td >\n                    <a class="del"  pid=').concat(t.pid,' href="javaScript:;">删除</a>\n                </td>\n            </tr>')}),$("table").append(n)}),$("table").on("click",".add",function(){var t=$(this).siblings(".num2"),n=parseInt(t.html());$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:uid,pid:$(this).parent().attr("pid"),pnum:n+1},function(t){console.log(t)}),t.html(n+1);var a=parseInt($(this).parent().parent().parent().find(".spice h3").html()),e=parseInt($(this).parent().parent().next().find("h3").html());console.log(a,e),$(this).parent().parent().next().find("h3").html(e+a)}),$("table").on("click",".reduce",function(){var t,n,a=$(this).siblings(".num2"),e=parseInt(a.html());1!=e&&(a.html(e-1),$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:uid,pid:a.parent().attr("pid"),pnum:e-1},function(t){console.log(t)}),t=parseInt($(this).parent().parent().parent().find(".spice h3").html()),n=parseInt($(this).parent().parent().next().find("h3").html()),console.log(t,n),$(this).parent().parent().next().find("h3").html(n-t))}),$("table").on("click",".del",function(){$(this).parent().parent().remove(),$.get("http://jx.xuzhixiang.top/ap/api/cart-delete.php",{uid:uid,pid:$(this).attr("pid")},function(t){console.log(t)})});