"use strict";!function(o){o(document).ready(function(){o("header").load("header.html")}),o(document).ready(function(){o("footer").load("footer.html")});var t=location.search.substring(1).split("=")[1],n=o("#smallpic"),s=o("#bpic"),c=o(".loadtitle"),a=o(".loadpcp"),t=t||1;o.ajax({url:"http://10.31.162.28/echong/php/getsid.php",data:{sid:t},dataType:"json"}).done(function(t){console.log(t),n.attr("src",t.url),n.attr("sid",t.sid),s.attr("src",t.url),c.html(t.title),a.html(t.price);var i=t.piclisturl.split(","),e="";o.each(i,function(t,i){e+='<li><img src="'+i+'"/>></li>'}),o("#list ul").html(e)});var l=o("#spic"),r=o("#sf"),i=o("#bf"),e=o("#left"),h=o("#right");o("#list");r.width(l.width()*i.width()/s.width()),r.height(l.height()*i.height()/s.height());var d=s.width()/l.width();l.hover(function(){r.css("visibility","visible"),i.css("visibility","visible"),o(this).on("mousemove",function(t){var i=t.pageX-o(".goodsinfo").offset().left-r.width()/2,e=t.pageY-o(".goodsinfo").offset().top-r.height()/2;i<0?i=0:i>=l.width()-r.width()&&(i=l.width()-r.width()),e<0?e=0:e>=l.height()-r.height()&&(e=l.height()-r.height()),r.css({left:i,top:e}),s.css({left:-i*d,top:-e*d})})},function(){r.css("visibility","hidden"),i.css("visibility","hidden")}),o("#list ul").on("click","li",function(){var t=o(this).find("img").attr("src");n.attr("src",t),s.attr("src",t)});var u=6;h.on("click",function(){var t=o("#list ul li");t.size()>u&&(u++,e.css("color","#333"),t.size()==u&&h.css("color","#fff"),o("#list ul").animate({left:-(u-6)*t.eq(0).outerWidth(!0)}))}),e.on("click",function(){var t=o("#list ul li");6<u&&(u--,h.css("color","#333"),u<=6&&e.css("color","#fff"),o("#list ul").animate({left:-(u-6)*t.eq(0).outerWidth(!0)}))});var f,p,v,m=[],g=[];o(".abtn").on("click",function(){var t,i=o(this).parents(".goodsinfo").find("#smallpic").attr("sid");g=o.cookie("cookiesid")&&o.cookie("cookienum")?(m=o.cookie("cookiesid").split(","),o.cookie("cookienum").split(",")):(m=[],[]),-1!=o.inArray(i,m)?(t=parseInt(g[o.inArray(i,m)])+parseInt(o("#count").val()),g[o.inArray(i,m)]=t):(m.push(i),o.cookie("cookiesid",m,{expires:10,path:"/"}),g.push(o("#count").val())),o.cookie("cookienum",g,{expires:10,path:"/"}),alert("加入购物城成功(⁎˃ᴗ˂⁎)")}),o.fn.extend({countDown:function(t){var l=o.extend({},{endTime:"2020/6/15",day:".day",hour:".hour",minute:".minute",sec:".sec"},t);function r(t){return t<10?"0"+t:t}return this.each(function(){var c=o(this);t();var a=setInterval(t,1e3);function t(){var t=new Date,i=(c.data("end")?new Date(c.data("end")):new Date(l.endTime))-t,e=Math.floor(i/1e3/60/60/24),o=Math.floor(i/1e3/60/60%24),n=Math.floor(i/1e3/60%60),s=Math.floor(i/1e3%60);0<i?(c.find(l.day).text(r(e)),c.find(l.hour).text(r(o)),c.find(l.minute).text(r(n)),c.find(l.sec).text(r(s))):clearInterval(a)}}),this}}),o(".count-down").countDown(),f=o(".zuo"),p=o(".you"),v=o("#count"),p.on("click",function(){v.val(parseInt(v.val())+1)}),f.on("click",function(){v.val(parseInt(v.val())-1),parseInt(v.val())-1<1&&v.val(1)})}(jQuery);