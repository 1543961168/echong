"use strict";!function(n){n(document).ready(function(){n("header").load("header.html")}),n(document).ready(function(){n("footer").load("footer.html")});var t=location.search.substring(1).split("=")[1],s=n("#smallpic"),o=n("#bpic"),c=n(".loadtitle"),a=n(".loadpcp"),l=n("#spic"),r=n("#sf"),i=n("#bf"),e=n("#left"),h=n("#right"),f=[],d=[],u=n(".abtn");n("#list");r.width(l.width()*i.width()/o.width()),r.height(l.height()*i.height()/o.height());var p=o.width()/l.width(),t=t||1;n.ajax({url:"http://10.31.162.28/echong/php/getsid.php",data:{sid:t},dataType:"json"}).done(function(t){console.log(t),s.attr("src",t.url),s.attr("sid",t.sid),o.attr("src",t.url),c.html(t.title),a.html(t.price);var i=t.piclisturl.split(","),e="";n.each(i,function(t,i){e+='<li><img src="'+i+'"/>></li>'}),n("#list ul").html(e)}),l.hover(function(){r.css("visibility","visible"),i.css("visibility","visible"),n(this).on("mousemove",function(t){var i=t.pageX-n(".goodsinfo").offset().left-r.width()/2,e=t.pageY-n(".goodsinfo").offset().top-r.height()/2;i<0?i=0:i>=l.width()-r.width()&&(i=l.width()-r.width()),e<0?e=0:e>=l.height()-r.height()&&(e=l.height()-r.height()),r.css({left:i,top:e}),o.css({left:-i*p,top:-e*p})})},function(){r.css("visibility","hidden"),i.css("visibility","hidden")}),n("#list ul").on("click","li",function(){var t=n(this).find("img").attr("src");s.attr("src",t),o.attr("src",t)});var v,m,g,w=6;h.on("click",function(){var t=n("#list ul li");t.size()>w&&(w++,e.css("color","#333"),t.size()==w&&h.css("color","#fff"),n("#list ul").animate({left:-(w-6)*t.eq(0).outerWidth(!0)}))}),e.on("click",function(){var t=n("#list ul li");6<w&&(w--,h.css("color","#333"),w<=6&&e.css("color","#fff"),n("#list ul").animate({left:-(w-6)*t.eq(0).outerWidth(!0)}))}),u.on("click",function(){var t,i=n(this).parents(".goodsinfo").find("#smallpic").attr("sid");d=n.cookie("cookiesid")&&n.cookie("cookienum")?(f=n.cookie("cookiesid").split(","),n.cookie("cookienum").split(",")):(f=[],[]),-1!=n.inArray(i,f)?(t=parseInt(d[n.inArray(i,f)])+parseInt(n("#count").val()),d[n.inArray(i,f)]=t):(f.push(i),n.cookie("cookiesid",f,{expires:10,path:"/"}),d.push(n("#count").val())),n.cookie("cookienum",d,{expires:10,path:"/"});var e=n(".car1").offset(),o=s.attr("src");n('<img class="u-flyer" src="'+o+'">').fly({start:{left:s.offset().top,top:s.offset().left},end:{left:e.left+10,top:e.top+10,width:0,height:0},onEnd:function(){n("#msg").show().fadeOut(1e3)}})}),n.fn.extend({countDown:function(t){var l=n.extend({},{endTime:"2020/6/15",day:".day",hour:".hour",minute:".minute",sec:".sec"},t);function r(t){return t<10?"0"+t:t}return this.each(function(){var c=n(this);t();var a=setInterval(t,1e3);function t(){var t=new Date,i=(c.data("end")?new Date(c.data("end")):new Date(l.endTime))-t,e=Math.floor(i/1e3/60/60/24),o=Math.floor(i/1e3/60/60%24),n=Math.floor(i/1e3/60%60),s=Math.floor(i/1e3%60);0<i?(c.find(l.day).text(r(e)),c.find(l.hour).text(r(o)),c.find(l.minute).text(r(n)),c.find(l.sec).text(r(s))):clearInterval(a)}}),this}}),n(".count-down").countDown(),v=n(".zuo"),m=n(".you"),g=n("#count"),m.on("click",function(){g.val(parseInt(g.val())+1)}),v.on("click",function(){g.val(parseInt(g.val())-1),parseInt(g.val())-1<1&&g.val(1)})}(jQuery);