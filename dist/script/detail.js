"use strict";!function(e){e(document).ready(function(){e("header").load("header.html")}),e(document).ready(function(){e("footer").load("footer.html")});var t=location.search.substring(1).split("=")[1],n=e("#smallpic"),s=e("#bpic"),c=e(".loadtitle"),l=e(".loadpcp"),t=t||1;e.ajax({url:"http://10.31.162.28/echong/php/getsid.php",data:{sid:t},dataType:"json"}).done(function(t){console.log(t),n.attr("src",t.url),n.attr("sid",t.sid),s.attr("src",t.url),c.html(t.title),l.html(t.price),console.log(t.piclisturl.split(","));var i=t.piclisturl.split(","),o="";e.each(i,function(t,i){o+='<li><img src="'+i+'"/>></li>'}),e("#list ul").html(o)});var a=e("#spic"),r=e("#sf"),i=e("#bf"),o=e("#left"),h=e("#right");e("#list");r.width(a.width()*i.width()/s.width()),r.height(a.height()*i.height()/s.height());var d=s.width()/a.width();a.hover(function(){r.css("visibility","visible"),i.css("visibility","visible"),e(this).on("mousemove",function(t){var i=t.pageX-e(".goodsinfo").offset().left-r.width()/2,o=t.pageY-e(".goodsinfo").offset().top-r.height()/2;i<0?i=0:i>=a.width()-r.width()&&(i=a.width()-r.width()),o<0?o=0:o>=a.height()-r.height()&&(o=a.height()-r.height()),r.css({left:i,top:o}),s.css({left:-i*d,top:-o*d})})},function(){r.css("visibility","hidden"),i.css("visibility","hidden")}),e("#list ul").on("click","li",function(){var t=e(this).find("img").attr("src");n.attr("src",t),s.attr("src",t)});var u=6;h.on("click",function(){var t=e("#list ul li");t.size()>u&&(u++,o.css("color","#333"),t.size()==u&&h.css("color","#fff"),e("#list ul").animate({left:-(u-6)*t.eq(0).outerWidth(!0)}))}),o.on("click",function(){var t=e("#list ul li");6<u&&(u--,h.css("color","#333"),u<=6&&o.css("color","#fff"),e("#list ul").animate({left:-(u-6)*t.eq(0).outerWidth(!0)}))});var f,p,v,m=[],g=[];e(".abtn").on("click",function(){var t,i=e(this).parents(".goodsinfo").find("#smallpic").attr("sid");g=e.cookie("cookiesid")&&e.cookie("cookienum")?(m=e.cookie("cookiesid").split(","),e.cookie("cookienum").split(",")):(m=[],[]),-1!=e.inArray(i,m)?(t=parseInt(g[e.inArray(i,m)])+parseInt(e("#count").val()),g[e.inArray(i,m)]=t):(m.push(i),e.cookie("cookiesid",m,{expires:10,path:"/"}),g.push(e("#count").val())),e.cookie("cookienum",g,{expires:10,path:"/"}),alert("加入购物城成功(⁎˃ᴗ˂⁎)")}),e.fn.extend({countDown:function(t){var a=e.extend({},{endTime:"2020/6/15",day:".day",hour:".hour",minute:".minute",sec:".sec"},t);function r(t){return t<10?"0"+t:t}return this.each(function(){var c=e(this);t();var l=setInterval(t,1e3);function t(){var t=new Date,i=(c.data("end")?new Date(c.data("end")):new Date(a.endTime))-t,o=Math.floor(i/1e3/60/60/24),e=Math.floor(i/1e3/60/60%24),n=Math.floor(i/1e3/60%60),s=Math.floor(i/1e3%60);0<i?(c.find(a.day).text(r(o)),c.find(a.hour).text(r(e)),c.find(a.minute).text(r(n)),c.find(a.sec).text(r(s))):clearInterval(l)}}),this}}),e(".count-down").countDown(),f=e(".zuo"),p=e(".you"),v=e("#count"),p.on("click",function(){v.val(parseInt(v.val())+1)}),f.on("click",function(){v.val(parseInt(v.val())-1),parseInt(v.val())-1<1&&v.val(1)})}(jQuery);