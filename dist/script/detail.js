"use strict";!function(n){n(document).ready(function(){n("header").load("header.html"),n("footer").load("footer.html")});var t=location.search.substring(1).split("=")[1],s=n("#smallpic"),o=n("#bpic"),c=n(".loadtitle"),l=n(".loadpcp"),a=n("#spic"),r=n("#sf"),i=n("#bf"),e=n("#left"),h=n("#right"),f=[],d=[],u=n(".abtn");n("#list");r.width(a.width()*i.width()/o.width()),r.height(a.height()*i.height()/o.height());var p=o.width()/a.width(),t=t||1;n.ajax({url:"http://10.31.162.28/echong/php/getsid.php",data:{sid:t},dataType:"json"}).done(function(t){console.log(t),s.attr("src",t.url),s.attr("sid",t.sid),o.attr("src",t.url),c.html(t.title),l.html(t.price);var i=t.piclisturl.split(","),e="";n.each(i,function(t,i){e+='<li><img src="'+i+'"/>></li>'}),n("#list ul").html(e)}),a.hover(function(){r.css("visibility","visible"),i.css("visibility","visible"),n(this).on("mousemove",function(t){var i=t.pageX-n(".goodsinfo").offset().left-r.width()/2,e=t.pageY-n(".goodsinfo").offset().top-r.height()/2;i<0?i=0:i>=a.width()-r.width()&&(i=a.width()-r.width()),e<0?e=0:e>=a.height()-r.height()&&(e=a.height()-r.height()),r.css({left:i,top:e}),o.css({left:-i*p,top:-e*p})})},function(){r.css("visibility","hidden"),i.css("visibility","hidden")}),n("#list ul").on("click","li",function(){var t=n(this).find("img").attr("src");s.attr("src",t),o.attr("src",t)});var v,g,m,w=6;h.on("click",function(){var t=n("#list ul li");t.size()>w&&(w++,e.css("color","#333"),t.size()==w&&h.css("color","#fff"),n("#list ul").animate({left:-(w-6)*t.eq(0).outerWidth(!0)}))}),e.on("click",function(){var t=n("#list ul li");6<w&&(w--,h.css("color","#333"),w<=6&&e.css("color","#fff"),n("#list ul").animate({left:-(w-6)*t.eq(0).outerWidth(!0)}))}),u.on("click",function(){var t,i=n(this).parents(".goodsinfo").find("#smallpic").attr("sid");d=n.cookie("cookiesid")&&n.cookie("cookienum")?(f=n.cookie("cookiesid").split(","),n.cookie("cookienum").split(",")):(f=[],[]),-1!=n.inArray(i,f)?(t=parseInt(d[n.inArray(i,f)])+parseInt(n("#count").val()),d[n.inArray(i,f)]=t):(f.push(i),n.cookie("cookiesid",f,{expires:10,path:"/"}),d.push(n("#count").val())),n.cookie("cookienum",d,{expires:10,path:"/"});var e=n(".car1").offset(),o=s.attr("src");n('<img class="u-flyer" src="'+o+'">').fly({start:{left:s.offset().top,top:s.offset().left},end:{left:e.left+10,top:e.top+10,width:0,height:0},onEnd:function(){n("#msg").show().fadeOut(1e3)}})}),n.fn.extend({countDown:function(t){var a=n.extend({},{endTime:"2020/6/15",day:".day",hour:".hour",minute:".minute",sec:".sec"},t);function r(t){return t<10?"0"+t:t}return this.each(function(){var c=n(this);t();var l=setInterval(t,1e3);function t(){var t=new Date,i=(c.data("end")?new Date(c.data("end")):new Date(a.endTime))-t,e=Math.floor(i/1e3/60/60/24),o=Math.floor(i/1e3/60/60%24),n=Math.floor(i/1e3/60%60),s=Math.floor(i/1e3%60);0<i?(c.find(a.day).text(r(e)),c.find(a.hour).text(r(o)),c.find(a.minute).text(r(n)),c.find(a.sec).text(r(s))):clearInterval(l)}}),this}}),n(".count-down").countDown(),v=n(".zuo"),g=n(".you"),m=n("#count"),g.on("click",function(){m.val(parseInt(m.val())+1)}),v.on("click",function(){m.val(parseInt(m.val())-1),parseInt(m.val())-1<1&&m.val(1)})}(jQuery);